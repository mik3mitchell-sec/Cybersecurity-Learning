# Networking Services

**Course:** Google IT Support Professional (Certificate Course)  
**Platform:** Coursera  
**Objective:** Understand the purpose and function of core networking services—including DNS, DHCP, NAT, VPNs, and proxy services—and how they enable communication, address management, security, and connectivity in modern TCP/IP networks.

---

## Introduction to Networking Services

The main purpose of computer networking is so network services can be available to answer requests for the data from clients.

---

## Why do we need DNS?

- **Domain Name System (DNS)** - A global and highly distributed network service that resolves strings of letters into IP addresses for you.

- **Domain Name** - The term we use for something that can be resolved by DNS.

** **NOTE** - The IP address for a domain name can change all the time for a lot of different reasons.

  - www.weather.com would be the domain name, and the IP it resolves to could change depending on a variety of factors.

---

## The Many Steps of Name Resolution

- **Name Resolution** - The process of using DNS to turn a domain name into an IP address.

The IP address, subnet mask, and gateway for a host must be specifically configured. A DNS server is the fourth and final part of the standard modern network configuration.

- IP Address
- Subnet Mask
- Gateway for a Host
- DNS Server

There are five primary types of DNS servers:

1. Caching Name Servers 
2. Recursive Name Servers 
3. Root Name Servers 
4. TLD Name Servers 
5. Authoritative Name Servers

- **Caching and Recursive Name Servers** - Purpose is to store domain name lookups for a certain amount of time.
  - Generally provided by an ISP or your local network. 

As you'll see in a moment, there are lots of steps in order to perform a fully qualified resolution of a domain name. In order to prevent this from happening every single time a new TCP connection is established, your ISP or local network will generally have a caching name server available. Most caching name servers are also recursive name servers.

- **Recursive Name Servers** - Ones that perform full DNS resolution requests.

In most cases, your local name server will perform the duties of both, but it's definitely possible for a name server to be either just caching or just recursive.

- **Time to Live (TTL)** - This is a value in seconds that can be configured by the owner of a domain name for how long a name server is allowed to cache an entry before it should discard it and perform a full resolution again.

- **Anycast** - A technique that's used to route traffic to different destinations depending on factors like location, congestion, or link health.

** **Note** - There are 13 authorities that provide root name lookups as a service.

- A **TLD** is the last part of any domain name.
  - An example would be .com

## DNS and UDP
 
DNS is a great example of an application layer service that uses UDP for the transport layer instead of TCP. This can be broken down into a few simple reasons. Remember that the biggest difference between TCP and UDP is that UDP is connectionless. This means there's no setup or tear down of a connection, so much less traffic needs to be transmitted overall. A single DNS request and its response can usually fit inside of a single UDP datagram, making it an ideal candidate for a connectionless protocol. It's also worth calling out that DNS can generate a lot of traffic.

There are a grand total of 44 packets at the minimum in order for a fully recursive DNS request to be fulfilled via TCP.

There are a grand total of 8 packets at the minimum for UDP.

As the web has gotten more complex, it's no longer the case that all DNS lookup responses can fit in a single UDP datagram. In these situations, a DNS name server would respond with a packet explaining that the response is too large. The DNS client would then establish a TCP connection in order to perform the lookup.

## Resource Record Types

- ** A Record** - Used to point a certain domain name at a certain IPv4 IP address.
  - In its most basic use, a single A record is configured for a single domain name, but a single domain name can have multiple A records too. This allows for a technique known as DNS round robin to be used to balance traffic across multiple IPs.

- **Round Robin** - A concept that involves iterating over a list of items one by one in an orderly fashion.

- **Quad A Record** - Very similar to an A record, except that it returns an IPv6 address instead of an IPv4 address.

- **CNAME Record** - Used to redirect traffic from one domain to another.
  - CNAME is just shorthand for canonical name.

- **MX Record** - MX Stands for mail exchange, and this resource record is used in order to deliver email to the correct server.

- **SRV Record** - SRV stands for service record, and it's used to define the location of various specific services. 
  - It serves the exact same purpose as the MX resource record type, except for one thing. While MX is only for mail services, an SRV record can be defined to return the specifics of many different service types. For example, SRV records are often used to return the records of services like caldav, which is a calendar and scheduling service.

- **TXT Record** - TXT stands for text and was originally intended to be used only for associating some descriptive text with a domain name for human consumption. 
    - The idea was that you could leave notes or messages that humans could discover and read to learn more about arbitrary specifics of your network. But over the years, as the Internet and services that run on it have become more and more complex, the text record has been increasingly used to convey additional data intended for other computers to process. Since the text record has a field that's entirely free form, clever engineers have figured out ways to use it to communicate data not originally intended to be communicated by a system like DNS. It's pretty clever, right? This text record is often used to communicate configuration preferences about network services that you've entrusted other organizations to handle for your domain. For example, it's common for the text record to be used to convey additional info to an email as a service provider, which is a company that handles your email delivery for you.

---

## Anatomy of a Domain Name

| Subdomain | Domain (Name) | Top Level Domain |
| :---- | :----: | ----: |
| www | google | .com |


- **Domains** The name commonly used to refer to the second part of a domain name. Used to demarcate where control moves from a TLD name server to an authoritative name server.

- **Top Level Domain (TLD)** - The last part of a domain name. 

Administration and definition of TLDs is handled by a nonprofit organization known as ICANN.

- **ICANN** -The Internet Corporation for Assigned Names and Numbers. ICANN is a sister organization to the IANA (Internet Assigned Numbers Authority), and together they help define and control both the global IP spaces along with the global DNS system.

- **Fully Qualified Domain Name (FQDN)** - When you combine all these parts together, you have what's known as a fully qualified domain name or FQDN.

DNS can technically Support up to 127 levels of domain in total for a single fully qualified domain name. There are some other restrictions in place for how a domain name can be specified. Each individual section can only be 63 characters long, and a complete FQDN is limited to a total of 255 characters.

---

## Overview of DHCP

Every single computer on a modern TCP/IP-based network needs to have at least four things specifically configured. 

1. IP address
2. Subnet Mask for the local network
3. A primary gateway
4. A name server.

Out of these four things, three are likely the same on just about every node on the network, the subnet mask, the primary gateway, and DNS server. But the last item, an IP address needs to be different on every single node on the network. That could require a lot of tricky configuration work, and this is where **DHCP, or Dynamic Host Configuration Protocol** comes into play. 

- **Dynamic Host Configuration Protocol (DHCP)** - an application layer protocol that automates the configuration process of hosts on a network.

- **Dynamic Allocation** - A range of IP addresses is set aside for client devices, and one of these IPs is issued to these devices when they request one.

- **Automatic Allocation** - A range of IP addresses is set aside for assignment purposes.

- **Fixed Allocation** - Requires a manually specified list of MAC address and their corresponding IPs.

- **Network Time Protocol (NTP)** - Used to keep all computers on a network synchronized in time. 

- **DHCP Discovery** - The process by which a client configured to use DHCP attempts to get network configuration information.
  
**The DHCP discovery process has four steps.**

1. **Server Discovery (DHCP Discover)**  
   - The DHCP client does not yet have an IP address and does not know the IP of the DHCP server.  
   - The client sends a **DHCP Discover** message as a **broadcast** to find available DHCP servers on the local network.  
   - This message:
     - Is sent from **UDP port 68** (client)  
     - Is sent to **UDP port 67** (server)  
     - Uses a **source IP of 0.0.0.0**  
     - Uses a **destination IP of 255.255.255.255**  
   - Because it is a broadcast, every device on the local network receives it. Any DHCP server present will process the request.

2. **Offer (DHCP Offer)**  
   - A DHCP server that receives the discover message checks its configuration and available IP pool.  
   - Based on whether it is using **dynamic, automatic, or fixed allocation**, the server decides what IP address to offer.  
   - The server responds with a **DHCP Offer** message:
     - Sent from **UDP port 67** to **UDP port 68**  
     - Uses the server’s real IP as the source  
     - Uses **255.255.255.255** as the destination IP  
   - The offer includes the **MAC address of the client**, allowing the correct client to recognize the offer even though it is broadcast.

3. **Request (DHCP Request)**  
   - The client reviews the DHCP Offer and typically accepts it.  
   - The client responds with a **DHCP Request** message indicating it would like to use the offered IP address.  
   - This message:
     - Is still sent from **0.0.0.0**  
     - Is sent to the broadcast IP **255.255.255.255**  
   - While a client *could* reject an offer (for example, if multiple DHCP servers exist), this is uncommon in most environments.

4. **Acknowledgment (DHCP ACK)**  
   - The DHCP server receives the request and responds with a **DHCP Acknowledgment (ACK)** message.  
   - This message confirms the IP assignment and provides full network configuration details.  
   - The message:
     - Is sent from the DHCP server’s actual IP  
     - Uses the broadcast IP **255.255.255.255**  
     - Includes the client’s MAC address so the client knows the message is intended for it  
   - The client applies the provided configuration and can now fully communicate on the network.

**DHCP Lease**  
- The configuration information provided is known as a **DHCP lease**.  
- Leases include an **expiration time** and may last from minutes to days.  
- When a lease expires, the client must repeat the DHCP discovery process.  
- A client can also **release** its lease when disconnecting, returning the IP address to the DHCP server’s pool.

---

## Basics of NAT

- **Network Address Translation (NAT)** - A technology that allows a gateway, usually a router or firewall, to rewrite the source IP of an outgoing IP datagram while retaining the original IP in order to rewrite it into the response.

- NAT works by translating **internal (private) IP addresses** into a **single external (public) IP address** when traffic leaves a network.
- The gateway keeps track of which internal device initiated the connection so return traffic can be sent back to the correct machine.
- This process hides internal IP addresses from external networks, a technique known as **IP masquerading**.
- NAT allows **many internal devices to share one public IP address**, which helps conserve limited IPv4 address space.
- By making internal devices invisible to outside networks, NAT also provides a basic layer of **security**.

## NAT and the Transport Layer

- **Port Preservation** - A technique where the source port chosen by a client is the same port used by the router.

- When using one-to-many NAT, multiple internal devices share a single external IP address.
- The router tracks outbound connections by recording the **source port** used by each client.
- When return traffic arrives, the router uses the destination port to determine which internal device should receive the data.
- If two internal devices choose the same source port at the same time, the router assigns a different unused port to avoid conflicts and tracks this mapping internally.

- **Port Forwarding** - A technique where specific destination ports on the router are always forwarded to specific internal devices.
- Port forwarding allows internal services to be accessible from outside the network while still using NAT.
- External clients connect to the router’s public IP, and traffic is forwarded to the correct internal server based on the destination port.
- This allows multiple internal services (such as web and mail servers) to share a single external IP address while remaining accessible.

## Supplemental Reading for IPv4 Address Exhaustion

### IPv4 Address Exhaustion

IT professionals are responsible for troubleshooting network connections. If a device cannot connect to the network, the IP address is used as a part of a command line to test if the device is the issue.

The Internet Assigned Numbers Authority (IANA) distributes IP addresses, so unique addresses are used when connecting to the internet. Since 1988, IANA has assigned IP addresses, but the internet has expanded drastically, requiring billions of IP addresses. The possible combinations of numbers (4.2 billion) have almost run out.

This reading explains the structure for the distribution of IP addresses and how IPv6 is being used to solve the limited number of IP addresses available.

### Regional Internet Registries (RIRs)

IANA assigns IP address blocks to the five regional internet registries (RIRs). An RIR is an organization that manages internet number resources within a geographical region.

IANA is responsible for assigning address blocks to five Regional Internet Registries (RIRs):

- **AFRINIC** – Africa  
- **ARIN** – USA, Canada, and parts of the Caribbean  
- **APNIC** – Most of Asia, Australia, New Zealand, and Pacific Island nations  
- **LACNIC** – Central America, South America, and the remaining parts of the Caribbean not covered by ARIN  
- **RIPE** – Europe, Russia, Middle East, and portions of Central Asia  

Your computer gets its IP address directly from an RIR, not the IANA.

### Timeline for IPv4 Address Exhaustion

On February 3, 2011, IANA assigned the last unallocated /8 of the 4.2 billion possible combinations of IPv4 addresses. In some regions, recycled IP addresses are used due to reaching IP exhaustion.

The RIRs exhausted the following address blocks by date:

- **APNIC** reached its final /8 addresses in April 2011  
- **RIPE** reached its final /8 addresses in September 2012  
- **LACNIC** reached its final /10 addresses in June 2014  
- **ARIN** exhausted its list of free IPv4 addresses in September 2015  
- **AFRINIC**

---

## Virtual Private Networks

- **Virtual Private Networks (VPNs)** - allow remote computers or networks to securely access a private network as if they were physically connected to it.

- VPNs work by creating an **encrypted tunnel** between a client and a VPN endpoint, protecting data as it travels across public networks like the internet.

- When a VPN connection is established, the client is given a **virtual network interface** with an IP address that belongs to the private network, allowing access to internal resources.

- Data sent through a VPN is **encapsulated and encrypted**, then decrypted and unpacked at the VPN server before being forwarded onto the private network.

- VPNs require **strong authentication**, often including multi-factor authentication, to ensure only authorized users or devices can connect.

- VPNs can be used for **remote access** (employees connecting from outside the office) or **site-to-site connections**, allowing multiple physical locations to function as one network.

- **Two-factor Authentication** - A technique where more than just a username and password are required to authenticate.

---

## Proxy Services

- **Proxy Service** - A server that acts on behalf of a client in order to access another service.

Proxies sit between clients and other servers providing some additional benefit: 
- Anonymity
- Security
- Content Filtering
- Increased performance
- And a couple of other things.

- **Reverse Proxy** - A service that might appear to be a single server to external clients, but actually represents many servers living behind it.

Proxies come in many flavors, but the most important takeaway is that proxies are any server that act as an intermediary between a client and another server.
