# The Network Layer

**Course:** Google IT Support Professional (Certificate Course)  
**Platform:** Coursera  
**Objective:** Learn how data is identified, addressed, and delivered across interconnected networks by exploring IPv4 addressing, IP datagram structure, address classes, ARP resolution, subnetting, subnet masks, and essential routing principles.

---

## IPv4 Addresses

IP addresses are a 32-bit long numbers made up of four octets and each octet is normally described in decimal numbers. Eight bits of data or a single octet can represent all decimal numbers from 0-255. For example, 12.34.56.78 is a valid IP address, but 123.456.789.100 would not be because it has numbers larger than could be represented by eight bits.

**Example:**
### 12.34.56.78
00001100.001000010.00111000.01001110

Dotted Decimal Notation

The important thing to know for now is that IP addresses are distributed in large sections to various organizations and companies instead of being determined by hardware vendors.

It's important to call out that IP addresses belong to the networks, not to the devices attached to those networks.

On many modern networks, you can connect a new device and an IP address will be assigned to it automatically through a technology known as Dynamic Host Configuration Protocol. An IP address assigned this way is known as a dynamic IP address. 

The opposite of this is known as a static IP address, which must be configured on a node manually. In most cases, static IP addresses are reserved for servers and network devices while dynamic IP addresses are reserved for clients.

** ***NOTE*** **- MAC Addresses are used at the Data Link Layer and IP Addresses are used at the Networking Layer.**

---

## IPv4 Datagram & Encapsulation

Under the IP protocol, a packet is usually referred to as an IP datagram.

- **IP Datagram** - a highly structured series of fields that are strictly defined.
  - The two primary sections of an IP datagram are the header and the payload. You'll notice that an IP datagram header contains a lot more data than an ethernet frame header does.

![IP Datagram Header](/Google%20IT%20Support/Notes/assets/images/IP_Datagram_Header.png)

The first 4 bits identify the version of Internet Protocol is being used.

The most common version of IP is version 4 or IPv4. Version 6 or IPv6 is rapidly seeing more widespread adoption

- **Header Length Field** - almost always 20 bytes in length, when dealing with IPv4.

- **Service Type Field** - These 8 bits can be used to specify details about quality of service or QoS technologies.

- **Total Length Field** - to indicate the total length of the IP datagram it's attached to.

- **Identification Field** - A 16 bit number that's used to group messages together. 

IP datagrams have a maximum size and you might already be able to figure out what that is since the total length field is 16 bits and this field indicates the size of an individual datagram. 

The maximum size of a single datagram is the largest number you can represent with 16 bits (65,535). If the total amount of data that needs to be sent is larger than what can fit in a single data gram the IP layer needs to split this data up into many individual packets. When this happens, the identification field is used so that the receiving end understands that every packet with the same value in that field is part of the same transmission.

 - **Flag Field** - Used to indicate if a datagram is allowed to be fragmented or to indicate that the datagram has already been fragmented. 
 
 - **Fragmentation** - The process of taking a single IP datagram and splitting it up into several smaller datagrams.

- **Time to Live (TTL Field)** - An 8 bit field that indicates how many router hops a datagram can traverse before it's thrown away. 
  - Every time a datagram reaches a new router, that router decrements the TTL field by one. Once this value reaches zero, a router knows it doesn't have to forward the datagram any further. The main purpose of this field is to make sure that when there's a miss configuration in routing that causes an endless loop, datagrams don't spend all eternity trying to reach their destination.

- **Protocol field** - Another 8 bit field that contains data about what transport layer protocol is being used.

- **Header Checksum Field** - This field is a check some of the contents of the entire IP datagram header.

- **IP Options Field** - An optional field and is used to set special characteristics for data grams primarily used for testing purposes.
  - The IP options field is usually followed by a padding field since the IP options field is both optional and variable in length. 
  
- **Padding Field** - A series of zeroes used to ensure the header is the correct total size. 

---

## IPv4 Address Classes

IP addresses can be split into two sections: the **network ID** and the **host ID**.

- **Address Class System** - A way of defining how the global IP address space is split up. There are three primary types of address classes: Class A, class B, and class C. Class D and E are not quite as important to understand, but are listed below.

![IPv4 Address Classes](/Google%20IT%20Support/Notes/assets/images/IPv4_Address_Classes.png)

- Class A addresses are those where the first octet is used for the network ID and the last three are used for the host ID. 

- Class B addresses are where the first two octets are used for the network ID and the second two are used for the host ID. 

- Class C addresses, are those where the first three octets are used for the network ID and only the final octet is used for the host ID.

- Class D addresses always begin with the bits 1110 and are used for multicasting, which is how a single IP datagram can be send to an entire network at once. These addresses begin with decimal values between 224 and 239. 

- Class E addresses makeup all of the remaining IP addresses, but they are unassigned and only used for testing purposes.  

Each address class represents a network of vastly different size.

In practical terms, this class system has mostly been replaced by a system known as CIDR or Classless Inter-Domain Routing. But the address class system is still in place in many ways and is important to understand for anyone looking for a well-rounded networking education.

---

## Address Resolution Protocol

- **Address Resolution Protocol (ARP)** - A protocol used to discover the hardware address of a node with a certain IP address. 

Once an IP datagram has been fully formed, it needs to be encapsulated inside an Ethernet frame. This means that the transmitting device needs a destination MAC address to complete the Ethernet frame header.

Almost all network connected devices will retain a local ARP table. 

- ** ARP Table** - A list of IP addresses and the MAC address is associated with them.

ARP table entries generally expire after a short amount of time to ensure changes in the network are accounted for.

---
## Subnetting

- **Subnetting** -The process of taking a large network and splitting it up into many individual smaller subnetworks, or subnets.

Incorrect subnetting setups are a common problem you might run into as an IT support specialist, so it's important to have a strong understanding of how this works.

- Address classes give us a way to break the total global IP space into discrete networks. 

A gateway router specifically serves as the entry and exit path to a certain network. Once your packet gets to the gateway router for the network, that router is now responsible for getting that data to the proper system by looking at the host id.

This is where subnetting comes in. With subnets, you can split your large network up into many smaller ones. These individual subnets will all have their own gateway routers, serving as the ingress and egress point for each subnet.

---

## Subnet Masks

Subnet IDs are calculated via what's known as a subnet mask. Just like an IP address, subnet masks are:

- **Subnet Masks** - are 32-bit numbers that are normally written now as four octets in decimal.

---

## Basic Routing Concepts

- **Router** - A network device that forwards traffic depending on the destination address of that traffic. 

Basic routing has just a few steps. These steps are repeated as often as needed until the traffic reaches its destination.

1) A router receives a packet of data on one of its interfaces. 
2) The router examines the destination IP of this packet. 
3) The router then looks up the destination network of this IP in its routing table. 
4) The router forwards that out through the interface that's closest to the remote network as determined by additional info within the routing table. 
 
---

## Routing Tables

![Basic Routing Table](/Google%20IT%20Support/Notes/assets/images/Basic_Routing_Table.png)

- **Destination Network** - This column would contain a row for each network that the router knows about.

- **Next Hop** - This is the IP address of the next router that should receive data intended for the destination networking question.

- **Total Hops** - The total number of devices data passes through to get from its source to its destination. Routers try to choose the shortest path, so fewest hops possible. The routing table is used to keep track of this.

- **Interface** - For a router, the port where a router connects to a network. A router gives and receives data through its interfaces. These are also used as part of the routing table.

---

## Interior Gateway Protocols

- **Routing Protocols** - These are special protocols the routers use to speak to each other in order to share what information they might have.

Routing protocols fall into two main categories:
1) Interior Gateway Protocols
  - Interior gateway protocols are further split into two categories:
    1) Link State Routing Protocols
    2) Distance Vector Protocols.
2) Exterior Gateway Protocols. 

- **Interior Gateway Protocols** - Used by routers to share information within a single autonomous system.

- **Autonomous System** - A collection of networks that all fall under the control of a single network operator.

- **Exterior Gateway Protocols** - Used for the exchange of information between independent autonomous systems. 


** ***NOTE*** - In computer science, a **list** is known as a **vector**. 

---

## Exterior Gateways, Autonomous Systems, and the IANA

- **Internet Assigned Numbers Authority (IANA)** - A non-profit organization that helps manage things like IP address allocation.

Along with managing IP address allocation, the IANA is also responsible for ASN or Autonomous System Number allocation. 

- ** Autonomous System Numbers (ASN)** - Numbers assigned to individual autonomous systems. 

Just like IP addresses ASNs are 32-bit numbers, but unlike IP addresses, they're normally referred to as just a single decimal number instead of being split out into readable bits. There are two reasons for this. 

1) IP addresses need to be able to represent a network ID portion and a host ID portion for each number. An ASN never needs to change in order for it to represent more networks or hosts. It's just the core Internet routing tables that need to be updated to know what the ASN represents. 
2) ASNs are looked at by humans far less often than IP addresses are. ASNs represent entire autonomous systems. 

---

- **Non-Routable Address Space** - They are ranges of IPs set aside for use by anyone that cannot be routed to. 
  - Not every computer connected to the Internet needs to be able to communicate with every other computer connected to the Internet. Non routable address space allows for nodes on such a network to communicate with each other, but no gateway router will attempt to forward traffic to this type of network. 

---

## üìù Terms

- **Demarcation Point** - To describe where one network or system ends and another begins.

---

## üóÉ Resources


